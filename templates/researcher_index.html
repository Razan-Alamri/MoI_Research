{% extends "base.html" %}
{% block content %}
<section class="researcher-wrapper">
  <div class="researcher-header">
    <div>
      <h1 class="researcher-title">ุจูุงุจุฉ ุงูุจุงุญุซูู ูุฅุฏุฎุงู ุงูุฃุจุญุงุซ ูุงููุดุงุฑูุน</h1>
      <p class="researcher-subtitle">
        ูู ุฎูุงู ูุฐู ุงูุจูุงุจุฉ ูููู ููุจุงุญุซูู ูู ูุทุงุนุงุช ูุฒุงุฑุฉ ุงูุฏุงุฎููุฉ ุฅุฏุฎุงู ุฃุจุญุงุซูู ููุดุงุฑูุนูู
        ูุชุธูุฑ ูุงุญููุง ูู ููุตุฉ ูุนุฑูุฉ.
      </p>
    </div>
    <a href="{{ url_for('researcher_new') }}" class="btn-primary">
      <i class="bi bi-plus-circle"></i>
      ุฅุถุงูุฉ ุจุญุซ ุฌุฏูุฏ
    </a>
  </div>

  {% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
  <div class="flash-wrap">
    {% for cat, msg in messages %}
    <div class="flash flash-{{ cat }}">{{ msg }}</div>
    {% endfor %}
  </div>
  {% endif %}
  {% endwith %}

  <div class="researcher-table-card">
    <table class="researcher-table">
      <thead>
        <tr>
          <th>ุงูุนููุงู</th>
          <th>ุงูููุน</th>
          <th>ุงููุทุงุน</th>
          <th>ุงูุณูุฉ</th>
          <th>ุงูุณุฑูุฉ</th>
          <th style="width:140px;">ุฅุฌุฑุงุกุงุช</th>
        </tr>
      </thead>

      <tbody>
        {% if items %}
        {% for it in items %}
        <tr>
          <td>
            <div class="title-cell">
              <span class="main-title">{{ it["title"] }}</span>
              {% if it["short"] %}
              <span class="sub-title">{{ it["short"] }}</span>
              {% endif %}
            </div>
          </td>
          <td>
            {% if it["kind"] == "Project" %}ูุดุฑูุน
            {% elif it["kind"] == "Innovation" %}ุงุจุชูุงุฑ
            {% else %}ุจุญุซ{% endif %}
          </td>
          <td>{{ it["sector"] or "-" }}</td>
          <td>{{ it["year"] or "-" }}</td>
          <td>
            {% if it["confidentiality"] == "conf" %}
            <span class="tag-status tag-conf">ุณุฑู</span>
            {% else %}
            <span class="tag-status tag-public">ุบูุฑ ุณุฑู</span>
            {% endif %}
          </td>

          <!-- ๐น ููุง ุฒุฑ "ุนุฑุถ" + "ุชุนุฏูู" -->
          <td>
            <a class="link-action" href="{{ url_for('researcher_view', item_id=it['id']) }}">
              <i class="bi bi-eye"></i> ุนุฑุถ
            </a>
            &nbsp;|&nbsp;
            <a class="link-action" href="{{ url_for('researcher_edit', item_id=it['id']) }}">
              <i class="bi bi-pencil-square"></i> ุชุนุฏูู
            </a>
          </td>
        </tr>
        {% endfor %}
        {% else %}
        <tr>
          <td colspan="6" style="text-align:center; color:var(--muted);">
            ูุง ุชูุฌุฏ ุฃุจุญุงุซ ูุฏุฎูุฉ ุญุชู ุงูุขู.
          </td>
        </tr>
        {% endif %}
      </tbody>

    </table>
  </div>
</section>
{% endblock %}